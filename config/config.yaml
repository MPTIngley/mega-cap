# StockPulse Configuration
# ========================
# Edit this file to customize strategy parameters, alerts, and risk management.
# Email credentials should be set via environment variables (see .env.example)

email:
  smtp_server: smtp.gmail.com
  smtp_port: 587
  # Email addresses are set via environment variables:
  #   STOCKPULSE_EMAIL_SENDER - Your Gmail address
  #   STOCKPULSE_EMAIL_RECIPIENT - Primary recipient (can be same as sender)
  #   STOCKPULSE_EMAIL_RECIPIENTS_CC - Additional recipients, comma-separated
  #   STOCKPULSE_EMAIL_PASSWORD - Gmail App Password (NOT your regular password!)

database:
  path: "data/stockpulse.duckdb"

scanning:
  interval_minutes: 15
  market_open: "09:30"
  market_close: "16:00"
  timezone: "US/Eastern"

# Transaction costs (realistic estimates)
trading:
  commission_per_trade: 0.0  # Most brokers are commission-free now
  slippage_percent: 0.05  # 5 bps slippage estimate
  spread_percent: 0.02  # 2 bps average spread for large caps
  # Total round-trip cost estimate: ~0.14% (7 bps each way)

# =============================================================================
# AGGRESSIVE STRATEGY CONFIGURATION - Tuned for Maximum Profit Pursuit
# =============================================================================
# Philosophy: Tighter entries, asymmetric risk/reward, cut losers fast
# Risk/Reward minimum: 2:1 on all strategies
# =============================================================================

strategies:
  mean_reversion_rsi:
    enabled: true
    rsi_period: 14
    rsi_oversold: 25           # MORE extreme oversold (was 30) - higher conviction entries
    rsi_overbought: 75         # MORE extreme overbought (was 70)
    min_confidence: 65         # Slightly higher bar
    hold_days_min: 2           # Faster (was 3) - capture quick bounces
    hold_days_max: 7           # Shorter (was 10) - don't overstay
    stop_loss_pct: 3.0         # TIGHTER stop (was 5) - cut losers fast
    take_profit_pct: 8.0       # Keep target - 2.7:1 risk/reward

  bollinger_squeeze:
    enabled: true
    bb_period: 20
    bb_std: 2.0
    squeeze_threshold: 0.03    # TIGHTER squeeze (was 0.05) - bigger moves
    min_confidence: 65
    hold_days_min: 1           # Can be very fast (was 2)
    hold_days_max: 10          # Shorter (was 15)
    stop_loss_pct: 3.0         # TIGHTER (was 4) - squeeze fails = get out
    take_profit_pct: 12.0      # BIGGER target (was 10) - 4:1 risk/reward

  macd_volume:
    enabled: true
    macd_fast: 12
    macd_slow: 26
    macd_signal: 9
    volume_threshold: 2.0      # HIGHER volume required (was 1.5) - only big moves
    min_confidence: 65
    hold_days_min: 3           # Shorter (was 5)
    hold_days_max: 15          # Shorter (was 20)
    stop_loss_pct: 4.0         # Tighter (was 5)
    take_profit_pct: 15.0      # BIGGER target (was 12) - 3.75:1 risk/reward

  mean_reversion_zscore:
    enabled: true
    lookback_period: 20
    zscore_entry: -2.5         # MORE extreme (was -2) - deeper oversold
    zscore_exit: 0.5           # Exit ABOVE mean (was 0) - capture overshoot
    min_confidence: 60
    hold_days_min: 1           # Very fast (was 2)
    hold_days_max: 7           # Shorter (was 10)
    stop_loss_pct: 4.0         # Tighter (was 6)
    take_profit_pct: 10.0      # Bigger (was 8) - 2.5:1 risk/reward

  momentum_breakout:
    enabled: true
    lookback_days: 10          # SHORTER lookback (was 20) - fresher breakouts
    breakout_threshold: 0.01   # TIGHTER threshold (was 0.02) - catch earlier
    volume_confirmation: 1.8   # HIGHER volume (was 1.3) - real conviction
    min_confidence: 60
    hold_days_min: 3           # Shorter (was 5)
    hold_days_max: 10          # Shorter (was 15) - momentum fades
    stop_loss_pct: 3.5         # Tight (was 5) - breakout fails = wrong
    take_profit_pct: 12.0      # Bigger (was 10) - 3.4:1 risk/reward

  gap_fade:
    enabled: true
    gap_threshold_pct: 1.5     # Minimum gap size to trade
    max_gap_pct: 5.0           # Don't fade huge gaps (might be news-driven)
    volume_surge_threshold: 1.5
    min_confidence: 60
    hold_days_min: 1           # Gaps often fill same day
    hold_days_max: 3           # If not filled quickly, exit
    stop_loss_pct: 3.0         # Tight stop
    take_profit_pct: 4.0       # Target is gap fill

  week52_low_bounce:
    enabled: true
    low_threshold_pct: 10.0    # Within 10% of 52-week low
    bounce_threshold_pct: 2.0  # Minimum bounce to confirm reversal
    volume_surge: 1.3          # Volume confirmation
    min_confidence: 60
    hold_days_min: 5           # Value plays need time
    hold_days_max: 30          # Longer hold for mean reversion
    stop_loss_pct: 6.0         # Wider stop for volatile bottoms
    take_profit_pct: 15.0      # Big upside target

  sector_rotation:
    enabled: true
    lookback_days: 20          # Period for sector strength calculation
    top_sectors: 2             # Buy stocks from top N sectors
    min_sector_return: 2.0     # Minimum sector return over lookback
    relative_strength_threshold: 1.1  # Stock must be 1.1x as strong as sector
    min_confidence: 60
    hold_days_min: 5
    hold_days_max: 20
    stop_loss_pct: 4.0
    take_profit_pct: 10.0

alerts:
  min_confidence_for_email: 65      # Lower threshold (was 70) - more signals
  daily_digest_time: "17:00"
  quiet_hours_start: "22:00"
  quiet_hours_end: "07:00"
  send_on_new_signal: true
  send_on_position_exit: true
  send_daily_digest: true
  send_error_alerts: true

# Confidence-based position sizing (aggressive)
# Higher confidence = bigger position
confidence_scaling:
  enabled: true
  base_size_pct: 5.0           # Default 5% position
  confidence_75_plus: 7.0      # 7% for confidence >= 75
  confidence_85_plus: 10.0     # 10% for confidence >= 85 (max conviction)

universe:
  source: "auto"  # "auto" fetches top 100 by market cap, "manual" uses list below
  count: 100
  manual_tickers: []  # Override list when source is "manual"
  refresh_interval_days: 7

# Paper Trading Portfolio
# This is your simulated portfolio for tracking signals and performance
portfolio:
  initial_capital: 100000.0  # $100k starting paper money
  # Can also be set via environment variable: STOCKPULSE_INITIAL_CAPITAL

risk_management:
  max_position_size_pct: 5.0  # Max 5% of portfolio per position ($5k at $100k)
  max_portfolio_exposure_pct: 80.0  # Max 80% invested at once ($80k at $100k)
  max_concurrent_positions: 20
  max_drawdown_disable_pct: 15.0  # Disable strategy if drawdown exceeds 15%
  min_days_between_same_ticker: 3  # Don't re-enter same stock within 3 days

backtest:
  start_date: "2023-01-01"
  end_date: null  # null means use latest available
  initial_capital: 100000.0
  position_size_pct: 5.0  # 5% per position in backtest

long_term_scanner:
  enabled: true
  run_time: "17:30"  # Run after market close
  pe_percentile_threshold: 30  # Flag if P/E below 30th percentile of history
  price_near_52w_low_pct: 15  # Within 15% of 52-week low
  min_dividend_yield: 0.0  # Minimum dividend yield (0 = no filter)
  min_score: 60  # Minimum composite score to flag
