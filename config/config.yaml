# StockPulse Configuration
# Optimized 2026-02-02 via stockpulse optimize

email:
  smtp_server: smtp.gmail.com
  smtp_port: 587

database:
  path: data/stockpulse.sqlite

scanning:
  interval_minutes: 15
  market_open: "09:30"
  market_close: "16:00"
  timezone: US/Eastern

trading:
  commission_per_trade: 0.0
  slippage_percent: 0.05
  spread_percent: 0.02

strategies:
  # RSI Mean Reversion - 11.4% return, 1.73 Sharpe
  rsi_mean_reversion:
    enabled: true
    rsi_period: 10
    rsi_oversold: 25
    rsi_overbought: 80
    stop_loss_pct: 5.0
    take_profit_pct: 6.0
    min_confidence: 70

  # Bollinger Squeeze - DISABLED (only 0.6% return)
  bollinger_squeeze:
    enabled: false
    bb_period: 20
    bb_std: 2.5
    squeeze_threshold: 0.04
    min_confidence: 70
    stop_loss_pct: 4.0
    take_profit_pct: 8.0

  # MACD Volume - 13.2% return, 2.21 Sharpe
  macd_volume:
    enabled: true
    macd_fast: 16
    macd_slow: 26
    macd_signal: 7
    volume_threshold: 1.5
    min_confidence: 65
    stop_loss_pct: 3.0
    take_profit_pct: 15.0

  # Z-Score Mean Reversion - 14.9% return, 1.80 Sharpe
  zscore_mean_reversion:
    enabled: true
    lookback_period: 20
    zscore_entry: -2.25
    zscore_exit: 0.5
    min_confidence: 60
    stop_loss_pct: 6.0
    take_profit_pct: 12.0

  # Momentum Breakout - 19.3% return, 2.23 Sharpe
  momentum_breakout:
    enabled: true
    lookback_days: 20
    breakout_threshold: 0.01
    volume_confirmation: 1.3
    min_confidence: 65
    stop_loss_pct: 5.0
    take_profit_pct: 15.0

  # Gap Fade - DISABLED (negative returns -1.3%)
  gap_fade:
    enabled: false
    gap_threshold_pct: 2.5
    max_gap_pct: 6.0
    volume_surge_threshold: 1.2
    min_confidence: 55
    stop_loss_pct: 3.0
    take_profit_pct: 6.0

  # 52-Week Low Bounce - 10.4% return, 3.67 Sharpe (best risk-adjusted!)
  week52_low_bounce:
    enabled: true
    low_threshold_pct: 12.0
    bounce_threshold_pct: 2.0
    volume_surge: 1.5
    min_confidence: 65
    stop_loss_pct: 5.0
    take_profit_pct: 20.0

  # Sector Rotation - 40.2% return, 2.87 Sharpe (TOP performer!)
  sector_rotation:
    enabled: true
    lookback_days: 10
    top_sectors: 2
    min_sector_return: 1.5
    relative_strength_threshold: 1.2
    min_confidence: 65
    stop_loss_pct: 3.0
    take_profit_pct: 8.0

# Strategy allocation weights (based on optimization 2024-08-11 to 2026-02-02)
strategy_allocation:
  sector_rotation: 2.0      # +40.2% return, 2.87 Sharpe - TOP performer
  momentum_breakout: 1.5    # +19.3% return, 2.23 Sharpe
  week52_low_bounce: 1.5    # +10.4% return, 3.67 Sharpe - best risk-adjusted!
  zscore_mean_reversion: 1.2  # +14.9% return, 1.80 Sharpe
  macd_volume: 1.2          # +13.2% return, 2.21 Sharpe
  rsi_mean_reversion: 1.0   # +11.4% return, 1.73 Sharpe
  bollinger_squeeze: 0.0    # DISABLED
  gap_fade: 0.0             # DISABLED

alerts:
  min_confidence_for_email: 65
  daily_digest_time: "17:00"
  quiet_hours_start: "22:00"
  quiet_hours_end: "07:00"
  send_on_new_signal: true
  send_on_position_exit: true
  send_daily_digest: true
  send_error_alerts: true

confidence_scaling:
  enabled: true
  base_size_pct: 5.0
  confidence_75_plus: 7.0
  confidence_85_plus: 10.0

universe:
  source: auto
  count: 100
  manual_tickers: []
  refresh_interval_days: 7

portfolio:
  # NOTE: These can be overridden by env vars:
  #   STOCKPULSE_INITIAL_CAPITAL, STOCKPULSE_POSITION_SIZE_PCT, STOCKPULSE_MAX_POSITIONS
  initial_capital: 100000.0
  base_position_size_pct: 15.0   # Base % of capital per position (before allocation weight)
  max_positions: 25

risk_management:
  # Per-position limits
  max_position_size_pct: 20.0           # Hard cap per position (after allocation weight)
  min_position_size_pct: 3.0            # Don't open if < 3% of capital

  # Per-stock concentration limit
  max_per_stock_pct: 20.0               # Never more than 20% in one stock

  # Per-strategy concentration limit
  max_per_strategy_pct: 40.0            # Never more than 40% in one strategy

  # Portfolio-level limits
  max_portfolio_exposure_pct: 80.0      # Max 80% invested at once
  max_concurrent_positions: 25
  max_drawdown_disable_pct: 15.0        # Stop trading if drawdown > 15%

  # Churn prevention
  min_days_between_same_ticker: 3

backtest:
  start_date: "2023-01-01"
  end_date: null
  initial_capital: 100000.0
  position_size_pct: 5.0

long_term_scanner:
  enabled: true
  run_time: "17:30"
  pe_percentile_threshold: 30
  price_near_52w_low_pct: 15
  min_dividend_yield: 0.0
  min_score: 60
